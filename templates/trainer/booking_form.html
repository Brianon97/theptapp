<!-- templates/trainer/booking_form.html -->
{% extends 'base.html' %}
{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="container my-5">
  <h2 class="mb-4">{{ title }}</h2>

  <form method="post" novalidate>
    {% csrf_token %}

    <div class="row g-4">
      {% if user.is_staff %}
      <div class="col-md-6">
        {{ form.client.label_tag }}
        {{ form.client }}
        {% if form.client.errors %}
          <div class="text-danger small">{{ form.client.errors }}</div>
        {% endif %}
      </div>

      <div class="col-md-6">
        {{ form.client_contact.label_tag }}
        <small class="text-muted d-block mb-2">{{ form.client_contact.help_text }}</small>
        {{ form.client_contact }}
      </div>
      {% else %}
        {{ form.client }}{{ form.client_contact }}{{ form.status }}
      {% endif %}

      <div class="col-md-6">
        {{ form.date.label_tag }}
        {{ form.date }}
        {% if form.date.errors %}<div class="text-danger small">{{ form.date.errors }}</div>{% endif %}
      </div>

      <div class="col-md-6">
        {{ form.time.label_tag }}
        {{ form.time }}
        {% if form.time.errors %}<div class="text-danger small">{{ form.time.errors }}</div>{% endif %}
      </div>

      <div class="col-12">
        {{ form.notes.label_tag }}
        {{ form.notes }}
      </div>

      {% if user.is_staff %}
      <div class="col-md-4">
        {{ form.status.label_tag }}
        {{ form.status }}
      </div>
      {% endif %}
    </div>

    <div class="mt-4">
      <button type="submit" class="btn btn-success btn-lg">
        <i class="fas fa-save me-2"></i>Save Booking
      </button>
      <a href="{% url 'trainer:booking_list' %}" class="btn btn-secondary btn-lg ms-2">Cancel</a>
    </div>
  </form>
</div>
{% endblock %}